{"version":3,"file":"isAuthRequired.js","sources":["../../../helpers/isAuthRequired.ts"],"sourcesContent":["import { endpoints } from '../generated/endpoints';\r\nconst regexCache = new Map<string, RegExp>();\r\nexport function isAuthRequired(config: { method: string; url?: string }): boolean {\r\n    const { method, url='' } = config;\r\n    const pathname = new URL(url, 'http://a').pathname;\r\n\r\n    for (const endpoint of endpoints) { // ← endpoints — массив, перебираем напрямую\r\n        if (endpoint.method !== method.toUpperCase()) continue;\r\n        let regex = regexCache.get(endpoint.path);\r\n        if (!regex) {\r\n            const pattern = endpoint.path\r\n                .replace(/\\//g, '\\\\/')          // экранируем /\r\n                .replace(/{[^}]+}/g, '[^/]+'); // {id} → [^/]+\r\n            regex = new RegExp('^' + pattern + '$');\r\n            regexCache.set(endpoint.path, regex);\r\n        }\r\n\r\n\r\n\r\n        if (regex.test(pathname)) {\r\n            return endpoint.requiresAuth;\r\n        }\r\n    }\r\n\r\n    return false; // не найдено → считаем публичным\r\n}"],"names":[],"mappings":";;AACA,MAAM,UAAU,GAAG,IAAI,GAAG,EAAkB;AACtC,SAAU,cAAc,CAAC,MAAwC,EAAA;IACnE,MAAM,EAAE,MAAM,EAAE,GAAG,GAAC,EAAE,EAAE,GAAG,MAAM;IACjC,MAAM,QAAQ,GAAG,IAAI,GAAG,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC,QAAQ;AAElD,IAAA,KAAK,MAAM,QAAQ,IAAI,SAAS,EAAE;AAC9B,QAAA,IAAI,QAAQ,CAAC,MAAM,KAAK,MAAM,CAAC,WAAW,EAAE;YAAE;QAC9C,IAAI,KAAK,GAAG,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC;QACzC,IAAI,CAAC,KAAK,EAAE;AACR,YAAA,MAAM,OAAO,GAAG,QAAQ,CAAC;AACpB,iBAAA,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC;AACrB,iBAAA,OAAO,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;YAClC,KAAK,GAAG,IAAI,MAAM,CAAC,GAAG,GAAG,OAAO,GAAG,GAAG,CAAC;YACvC,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,EAAE,KAAK,CAAC;QACxC;AAIA,QAAA,IAAI,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;YACtB,OAAO,QAAQ,CAAC,YAAY;QAChC;IACJ;IAEA,OAAO,KAAK,CAAC;AACjB;;;;"}